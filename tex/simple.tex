\chapter{Mechanisation of simple types}\label{sec:simple}

In this chapter, I review and justify the family of approaches usually used to
represent simple type systems inside dependently typed proof assistants:
intrinsically well scoped and well typed representations.
The line of work leading to intrinsically well typed representations of syntax
starts with \citet{BH94}, who defined, in Standard ML, a type of
$\lambda$-calculus terms indexed on the set/type of variables they contain, and
gave some operations on them.
Later, \citet{AR99} (working from a suggestion by Hook) and \citet{BP99DeBruijn}
used Haskell's support for nested
datatypes and polymorphic recursion over them to define types of terms indexed
only over \emph{free} variables, with a $\lambda$-abstraction having one fewer
free variable than its immediate subterm.
\Citet{AR99} also showed how to extend this well \emph{scoped} representation of
terms to a well \emph{typed} representation, given a metalanguage with dependent
types.
The representation of terms relies on indexing on both a context --- giving the
types of all the free variables --- and a type for the term itself.
A basic operation on terms is \emph{simultaneous substitution}, which replaces
each variable in the context by a term in another context.
%This simultaneous substitution operation fits the form of composition in a
%multicategory, giving us a connection to categorical logic~\citep{}.
%Specifically, in the case of a simple intuitionistic type system, this is the
%composition of a Cartesian multicategory, which allows all of the terms being
%substituted in to share a context.

This chapter reviews prior work, except for a mildly novel connecting stage at
the start of \cref{sec:gen-sem} introducing the
\AgdaFunction{$\bigcirc$}-modality.
First, in \cref{sec:agda-primer}, I give an introduction to Agda, the proof
assistant I work in throughout this thesis.
Then, in \cref{sec:terms}, I use a presentation of the dependently typed
encoding of the simply typed $\lambda$-calculus from \citet{AR99} to set
notational conventions.
\Cref{sec:kits} presents the work of \citet{BHKM12},
successively deriving simultaneous renaming and simultaneous substitution for
the terms defined in \cref{sec:terms} from a single traversal of the syntax.
The rest of the chapter generalises the shared core of renaming and substitution
in two dimensions: in \cref{sec:gen-sem} following \citet{ACMM17} to cover
semantic traversals, and in \cref{sec:gen-syn} following \citet{AACMM21} to
cover a whole range of simply typed syntaxes with binding, rather than just
a specific syntax.
Finally, I review some related work in \cref{sec:mech-related}.

The Agda code displayed in this chapter is available for further study at
\url{https://github.com/laMudri/thesis/tree/master/agda}, except for the code
in \cref{sec:gen-syn}, which is available at
\url{https://github.com/laMudri/generic-lr/tree/thesis/src/Generic/Simple}.

\input{agda-primer.tex}
\section{Term representation}\label{sec:terms}
\input{terms.tex}
\section{Renaming and substitution}\label{sec:kits}
\input{kits.tex}
\section{Generic semantics}\label{sec:gen-sem}
\input{gen-sem.tex}
\section{Generic syntax}\label{sec:gen-syn}
\input{gen-syn.tex}
%\section{Natural deduction vs sequent calculus}
%\input{ndsc.tex}
\section{Related work}\label{sec:mech-related}
\input{mech-related.tex}
